# 09.内外连接

## 一、内连接

内连接实际上就是利用`where`子句对两种表形成的笛卡儿积进行筛选，我们前面学习的查询都是内连接，也是在开发过程中使用的最多的连接查询。

- 语法：

  ```sql
  select 字段 from 表1 inner join 表2 on 连接条件 and 其他条件；
  ```

- 显示SMITH的名字和部门名称

  ```sql
  -- 普通写法
  mysql> select ename, dname from emp, dept where emp.deptno = dept.deptno and ename = 'SMITH';
  +-------+----------+
  | ename | dname    |
  +-------+----------+
  | SMITH | RESEARCH |
  +-------+----------+
  1 row in set (0.00 sec)
  
  -- 内连接写法
  mysql> select ename, dname from emp inner join dept on emp.deptno = dept.deptno and ename = 'SMITH';
  +-------+----------+
  | ename | dname    |
  +-------+----------+
  | SMITH | RESEARCH |
  +-------+----------+
  1 row in set (0.00 sec)
  ```

## 二、外连接

### 1.左外连接

如果联合查询，左侧的表完全显示我们就说是左外连接。

- 语法：

  ```sql
  select 字段名 from 表名1 left join 表名2 on 连接条件
  ```

- 案例：

  ```sql
  -- 建立学生表
  mysql> create table stu (
      -> id int,
      -> name varchar(30)
      -> );
  Query OK, 0 rows affected (0.05 sec)
  
  -- 向学生表中插入数据
  mysql> insert into stu values(1,'jack'),(2,'tom'),(3,'kity'),(4,'nono');
  Query OK, 4 rows affected (0.01 sec)
  Records: 4  Duplicates: 0  Warnings: 0
  
  mysql> select * from stu;
  +------+------+
  | id   | name |
  +------+------+
  |    1 | jack |
  |    2 | tom  |
  |    3 | kity |
  |    4 | nono |
  +------+------+
  4 rows in set (0.00 sec)
  
  -- 插入成绩表
  mysql> create table exam (
      -> id int,
      -> grade int
      -> );
  Query OK, 0 rows affected (0.04 sec)
  
  -- 向成绩表中插入数据
  mysql> insert into exam values(1, 56),(2,76),(11, 8);
  Query OK, 3 rows affected (0.01 sec)
  Records: 3  Duplicates: 0  Warnings: 0
  
  mysql> select * from exam;
  +------+-------+
  | id   | grade |
  +------+-------+
  |    1 |    56 |
  |    2 |    76 |
  |   11 |     8 |
  +------+-------+
  3 rows in set (0.00 sec)
  
  -- 查询学生考试情况信息，缺考也要显示出来
  mysql> select * from stu inner join exam on stu.id = exam.id;
  +------+------+------+-------+
  | id   | name | id   | grade |
  +------+------+------+-------+
  |    1 | jack |    1 |    56 |
  |    2 | tom  |    2 |    76 |
  +------+------+------+-------+
  2 rows in set (0.00 sec)
  -- 内连接是求交集，不会把缺考的同学列出来
  mysql> select * from stu left join exam on stu.id = exam.id;
  +------+------+------+-------+
  | id   | name | id   | grade |
  +------+------+------+-------+
  |    1 | jack |    1 |    56 |
  |    2 | tom  |    2 |    76 |
  |    3 | kity | NULL |  NULL |
  |    4 | nono | NULL |  NULL |
  +------+------+------+-------+
  4 rows in set (0.00 sec)
  -- 左外连接，以左表为主
  ```

### 2.右外连接

如果联合查询，右侧的表完全显示我们就说是右外连接。

- 语法：

  ```sql
  select 字段 from 表名1 right join 表名2 on 连接条件;
  ```

- 案例：

  对`stu`表和`exam`表联合查询，把所有的成绩都显示出来，即使这个成绩没有学生与它对应，也要显示出来。

  ```sql
  mysql> select * from stu right join exam on stu.id = exam.id;
  +------+------+------+-------+
  | id   | name | id   | grade |
  +------+------+------+-------+
  |    1 | jack |    1 |    56 |
  |    2 | tom  |    2 |    76 |
  | NULL | NULL |   11 |     8 |
  +------+------+------+-------+
  3 rows in set (0.00 sec)
  ```

  